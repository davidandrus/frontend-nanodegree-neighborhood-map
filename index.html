<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link href="//fonts.googleapis.com/css?family=Lato" rel="stylesheet">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/flag-icon-css/2.8.0/css/flag-icon.min.css">
  <link rel="stylesheet" href="style.css">
  <title>Countries of the world</title>
</head>
<body data-bind="css: { 'nav-open' : view() === 'nav', 'info-panel-open': view() === 'infoPanel' }">
  <div class="container">
    <aside class="sidebar">
      <div class="filter">
        <input
          data-bind="{ value: countryFilter, valueUpdate: 'afterkeydown' }"
          class="filter-input"
          type="text"
          placeholder="filter by keyword"
        >
        <button class="filter-button">Go</button>
      </div>
      <!-- ko if: countriesLoading -->
        <div class="loader">
          <div class="loader-spinner"></div>
        </div>
      <!-- /ko -->
      <!-- ko if: countries().length > 0 -->
        <nav class="nav">
          <ul class="nav-list" data-bind="foreach: filteredCountries">
            <li>
              <a
                href="#"
                data-bind="text: name, event: { click: $parent.setToCountry }"
              >
              </a>
            </li>
          </ul>
        </nav>
      <!-- /ko -->
      <!-- ko if: countriesError -->
        <div class="sidebar-error">
          <p>There was a a problem loading the countries</p>
          <button
            class="sidebar-error-button"
            data-bind="event: { click: loadCountries }">Retry</button>
        </div>
      <!-- /ko -->
    </aside>
    <main class="main">
      <header class="header">
        <button data-bind="event: { click: function(data, event) { setView('nav') }}">Open Nav</button>
        <h1 class="app-name">Countries of the world</h1>
      </header>
      <div id="map"></div>
    </main>
    <aside class="info-panel">
      <div ></div>
      <!-- ko if: !selectedCountry() -->
        <h1>Click a pin on the map or fron the sidebar to see more info</h1>
      <!-- /ko -->
      <div data-bind="with: selectedCountry">
        <h1 data-bind="text: name"></h1>
        <img class="info-panel-flag"
          data-bind="attr: { src: flagUrl }">
        <div class="info-panel-item">
          <span class="info-panel-item-label">Capital City:</span>
          <span
            class="item-panel-item-value"
            data-bind="text: capital">
          </span>
        </div>
        <div class="info-panel-item">
          <span class="info-panel-item-label">Population:</span>
          <span
            class="item-panel-item-value"
            data-bind="text: population">
          </span>
        </div>
        <div class="info-panel-item">
          <span class="info-panel-item-label">Region:</span>
          <span
            class="item-panel-item-value"
            data-bind="text: region">
          </span>
        </div>
        <div class="info-panel-item">
          <span class="info-panel-item-label">Sub-region:</span>
          <span
            class="item-panel-item-value"
            data-bind="text: subregion">
          </span>
        </div>
        <div class="info-panel-item">
          <span class="info-panel-item-label">Area:</span>
          <span
            class="item-panel-item-value"
            data-bind="text: area">
          </span>
        </div>
        <!-- ko if: languages -->
        <div class="info-panel-item">
          <span class="info-panel-item-label">Languages:</span>
          <span
            class="item-panel-item-value"
            data-bind="text: languages">
          </span>
        </div>
        <!-- /ko -->
        <div class="info-panel-item">
          <span class="info-panel-item-label">Timezones:</span>
          <span
            class="item-panel-item-value"
            data-bind="text: timezones">
          </span>
        </div>
        <!-- ko if: currencies -->
        <div class="info-panel-item">
          <span class="info-panel-item-label">Currencies:</span>
          <span
            class="item-panel-item-value"
            data-bind="text: currencies">
          </span>
        </div>
        <!-- /ko -->
        <p><small>Country info from: <a href="https://restcountries.eu/" target="_blank">https://restcountries.eu/</a></small></p>
      </div>
    </aside>
  </div>

<!-- https://www.mediawiki.org/wiki/API:Main_page
https://restcountries.eu/
http://flags.fmcdn.net/data/flags/normal/jp.png
http://api.giphy.com/v1/gifs/search?q=finland&api_key=dc6zaTOxFJmzC -->
<!-- http://www.last.fm/api/show/geo.getTopTracks
http://sunrise-sunset.org/api
http://flag-icon-css.lip.is/
http://stackoverflow.com/questions/2265055/how-to-get-google-maps-api-to-set-the-correct-zoom-level-for-a-country
http://stackoverflow.com/questions/7095574/google-maps-api-3-custom-marker-color-for-default-dot-marker
-->

  <script src="//cdnjs.cloudflare.com/ajax/libs/knockout/3.4.1/knockout-min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/fetch/2.0.2/fetch.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/es6-promise/4.0.5/es6-promise.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script>
  <script src="//maps.googleapis.com/maps/api/js?key=AIzaSyAwr7QxnLXALgyvc3vbAqcsRrwJmSWrlIk&callback=initMap" async defer></script>
  <script src="mapStyle.js"></script>
  <script src="currency.js"></script>
  <script src="languages.js"></script>
  <script src="map.js"></script>
  <script src="app.js"></script>
</body>
</html>
